@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===== Theme palettes ===== */

/* Catppuccin Mocha (default dark) */
:root,
.theme-catppuccin-mocha {
  --color-code-bg: #0d1117;
  --color-surface: #1e1e2e;
  --color-surface-light: #313244;
  --color-surface-lighter: #45475a;
  --color-primary: #89b4fa;
  --color-primary-hover: #74c7ec;
  --color-text: #cdd6f4;
  --color-text-muted: #a6adc8;
  --color-text-dim: #6c7086;
  --color-accent-green: #a6e3a1;
  --color-accent-red: #f38ba8;
  --color-accent-yellow: #f9e2af;
  --color-accent-peach: #fab387;
  --color-scrollbar-thumb: #45475a;
  --color-scrollbar-thumb-hover: #585b70;
}

/* Catppuccin Latte (light) */
.theme-catppuccin-latte {
  --color-code-bg: #f6f8fa;
  --color-surface: #eff1f5;
  --color-surface-light: #e6e9ef;
  --color-surface-lighter: #ccd0da;
  --color-primary: #1e66f5;
  --color-primary-hover: #2a6ef6;
  --color-text: #4c4f69;
  --color-text-muted: #6c6f85;
  --color-text-dim: #9ca0b0;
  --color-accent-green: #40a02b;
  --color-accent-red: #d20f39;
  --color-accent-yellow: #df8e1d;
  --color-accent-peach: #fe640b;
  --color-scrollbar-thumb: #ccd0da;
  --color-scrollbar-thumb-hover: #bcc0cc;
}

/* Nord */
.theme-nord {
  --color-code-bg: #0d1117;
  --color-surface: #2e3440;
  --color-surface-light: #3b4252;
  --color-surface-lighter: #434c5e;
  --color-primary: #88c0d0;
  --color-primary-hover: #8fbcbb;
  --color-text: #eceff4;
  --color-text-muted: #d8dee9;
  --color-text-dim: #4c566a;
  --color-accent-green: #a3be8c;
  --color-accent-red: #bf616a;
  --color-accent-yellow: #ebcb8b;
  --color-accent-peach: #d08770;
  --color-scrollbar-thumb: #434c5e;
  --color-scrollbar-thumb-hover: #4c566a;
}

/* Tokyo Night */
.theme-tokyo-night {
  --color-code-bg: #0d1117;
  --color-surface: #1a1b26;
  --color-surface-light: #24283b;
  --color-surface-lighter: #414868;
  --color-primary: #7aa2f7;
  --color-primary-hover: #7dcfff;
  --color-text: #c0caf5;
  --color-text-muted: #a9b1d6;
  --color-text-dim: #565f89;
  --color-accent-green: #9ece6a;
  --color-accent-red: #f7768e;
  --color-accent-yellow: #e0af68;
  --color-accent-peach: #ff9e64;
  --color-scrollbar-thumb: #414868;
  --color-scrollbar-thumb-hover: #565f89;
}

/* Rose Pine */
.theme-rose-pine {
  --color-code-bg: #0d1117;
  --color-surface: #191724;
  --color-surface-light: #1f1d2e;
  --color-surface-lighter: #26233a;
  --color-primary: #c4a7e7;
  --color-primary-hover: #ebbcba;
  --color-text: #e0def4;
  --color-text-muted: #908caa;
  --color-text-dim: #6e6a86;
  --color-accent-green: #9ccfd8;
  --color-accent-red: #eb6f92;
  --color-accent-yellow: #f6c177;
  --color-accent-peach: #ebbcba;
  --color-scrollbar-thumb: #26233a;
  --color-scrollbar-thumb-hover: #393552;
}

/* Gruvbox Dark */
.theme-gruvbox-dark {
  --color-code-bg: #0d1117;
  --color-surface: #282828;
  --color-surface-light: #3c3836;
  --color-surface-lighter: #504945;
  --color-primary: #83a598;
  --color-primary-hover: #8ec07c;
  --color-text: #ebdbb2;
  --color-text-muted: #bdae93;
  --color-text-dim: #665c54;
  --color-accent-green: #b8bb26;
  --color-accent-red: #fb4934;
  --color-accent-yellow: #fabd2f;
  --color-accent-peach: #fe8019;
  --color-scrollbar-thumb: #504945;
  --color-scrollbar-thumb-hover: #665c54;
}

/* Solarized Light */
.theme-solarized-light {
  --color-code-bg: #f6f8fa;
  --color-surface: #fdf6e3;
  --color-surface-light: #eee8d5;
  --color-surface-lighter: #ddd6c1;
  --color-primary: #268bd2;
  --color-primary-hover: #2aa198;
  --color-text: #657b83;
  --color-text-muted: #839496;
  --color-text-dim: #93a1a1;
  --color-accent-green: #859900;
  --color-accent-red: #dc322f;
  --color-accent-yellow: #b58900;
  --color-accent-peach: #cb4b16;
  --color-scrollbar-thumb: #ddd6c1;
  --color-scrollbar-thumb-hover: #c9c2ac;
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: var(--color-scrollbar-thumb);
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--color-scrollbar-thumb-hover);
}

/* ===== Code block styling ===== */
pre code.hljs {
  padding: 1rem 1.25rem;
  border-radius: 0;
  font-size: 0.8125rem;
  line-height: 1.7;
  background: var(--color-code-bg);
}

/* ===== Markdown content styling ===== */

/* Remove top margin on the very first element inside markdown */
.markdown-content > :first-child {
  margin-top: 0 !important;
}
/* Remove bottom margin on the very last element */
.markdown-content > :last-child {
  margin-bottom: 0 !important;
}

/* Headings — clear hierarchy, generous spacing */
.markdown-content h1 {
  @apply text-[1.5rem] font-semibold mb-3 mt-6 leading-tight tracking-tight;
}
.markdown-content h2 {
  @apply text-[1.25rem] font-semibold mb-2.5 mt-5 leading-tight;
}
.markdown-content h3 {
  @apply text-[1.1rem] font-semibold mb-2 mt-4 leading-snug;
}
.markdown-content h4 {
  @apply text-base font-semibold mb-1.5 mt-3;
}

/* Paragraphs */
.markdown-content p {
  @apply mb-3 leading-[1.75];
}

/* Lists — clean spacing, softer markers */
.markdown-content ul {
  @apply list-disc pl-6 mb-3 space-y-1;
}
.markdown-content ol {
  @apply list-decimal pl-6 mb-3 space-y-1;
}
.markdown-content li {
  @apply leading-[1.7];
}
.markdown-content li > p {
  @apply mb-1;
}
/* Nested lists */
.markdown-content li > ul,
.markdown-content li > ol {
  @apply mt-1 mb-0;
}

/* Blockquotes — soft background, rounded, left accent bar */
.markdown-content blockquote {
  @apply pl-4 pr-3 py-2 my-3 rounded-r-lg italic text-text-muted;
  border-left: 3px solid var(--color-primary);
  border-left-color: color-mix(in srgb, var(--color-primary) 40%, transparent);
  background: color-mix(in srgb, var(--color-surface-light) 50%, transparent);
}
.markdown-content blockquote p:last-child {
  @apply mb-0;
}

/* Links */
.markdown-content a {
  @apply text-primary underline underline-offset-2 transition-colors;
  text-decoration-color: color-mix(in srgb, var(--color-primary) 30%, transparent);
}
.markdown-content a:hover {
  @apply text-primary-hover;
  text-decoration-color: color-mix(in srgb, var(--color-primary) 60%, transparent);
}

/* Tables — clean borders, rounded wrapper handled by component */
.markdown-content table {
  @apply w-full border-collapse text-sm;
}
.markdown-content th {
  @apply px-4 py-2.5 text-left font-semibold text-text-muted;
  background: color-mix(in srgb, var(--color-surface-light) 60%, transparent);
  border-bottom: 1px solid rgba(255, 255, 255, 0.06);
}
.markdown-content td {
  @apply px-4 py-2;
  border-bottom: 1px solid rgba(255, 255, 255, 0.04);
}
.markdown-content tr:last-child td {
  border-bottom: none;
}
.markdown-content tbody tr:hover {
  background: color-mix(in srgb, var(--color-surface-light) 30%, transparent);
}

/* Inline code — subtle chip-like appearance */
.markdown-content code:not(pre code) {
  @apply px-1.5 py-0.5 rounded-md text-[0.875em] font-mono;
  background: color-mix(in srgb, var(--color-surface-lighter) 60%, transparent);
}

/* Horizontal rule */
.markdown-content hr {
  @apply border-0 h-px my-6;
  background: color-mix(in srgb, var(--color-surface-lighter) 60%, transparent);
}

/* Strong / emphasis */
.markdown-content strong {
  @apply font-semibold text-text;
}

/* Strikethrough */
.markdown-content del {
  @apply text-text-muted;
}


/* Titlebar drag strip — only applied to the dedicated top bar element */
.titlebar-drag {
  -webkit-app-region: drag;
}

/* Light theme highlight.js overrides */
.theme-catppuccin-latte .hljs,
.theme-solarized-light .hljs {
  color: #24292e;
  background: var(--color-code-bg);
}
.theme-catppuccin-latte .hljs-keyword,
.theme-solarized-light .hljs-keyword { color: #d73a49; }
.theme-catppuccin-latte .hljs-string,
.theme-solarized-light .hljs-string { color: #032f62; }
.theme-catppuccin-latte .hljs-comment,
.theme-solarized-light .hljs-comment { color: #6a737d; }
.theme-catppuccin-latte .hljs-function,
.theme-solarized-light .hljs-function { color: #6f42c1; }
.theme-catppuccin-latte .hljs-number,
.theme-solarized-light .hljs-number { color: #005cc5; }
.theme-catppuccin-latte .hljs-title,
.theme-solarized-light .hljs-title { color: #6f42c1; }
.theme-catppuccin-latte .hljs-type,
.theme-solarized-light .hljs-type { color: #005cc5; }
.theme-catppuccin-latte .hljs-built_in,
.theme-solarized-light .hljs-built_in { color: #e36209; }
.theme-catppuccin-latte .hljs-literal,
.theme-solarized-light .hljs-literal { color: #005cc5; }
.theme-catppuccin-latte .hljs-attr,
.theme-solarized-light .hljs-attr { color: #005cc5; }
.theme-catppuccin-latte .hljs-variable,
.theme-solarized-light .hljs-variable { color: #e36209; }

/* Thinking indicator animation */
@keyframes thinking-dot {
  0%, 80%, 100% {
    transform: translateY(0);
    opacity: 0.4;
  }
  40% {
    transform: translateY(-4px);
    opacity: 1;
  }
}

.thinking-dot {
  animation: thinking-dot 1.4s ease-in-out infinite;
}
.thinking-dot:nth-child(2) {
  animation-delay: 0.2s;
}
.thinking-dot:nth-child(3) {
  animation-delay: 0.4s;
}

/* Fade-in animation for new chat welcome screen */
@keyframes fade-in {
  from {
    opacity: 0;
    transform: translateY(6px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-in {
  animation: fade-in 0.3s ease-out;
}

/* Smooth transitions */
.transition-sidebar {
  transition: width 0.2s ease-in-out;
}
